!function(t){var e={};function n(a){if(e[a])return e[a].exports;var o=e[a]={i:a,l:!1,exports:{}};return t[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:a})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e){t.exports={electoralMap:function(t){this.election=t,this.stateGeoJson="../data/states.json",this.countyGeoJson="../data/counties.json",this.stateMap=function(t,e,n){$("#national-map").empty();for(var a=500,o=1e3,s=0;s<n.features.length;s++)for(var r=0;r<e.length;r++){if(n.features[s].properties.NAME===e[r].state&&e[r].republican>e[r].democrat){n.features[s].properties.winner="R";break}if(n.features[s].properties.NAME===e[r].state&&e[r].republican<e[r].democrat){n.features[s].properties.winner="D";break}}var i=d3.geoPath().projection(d3.geoAlbersUsa());d3.select("#national-map").append("svg").attr("width","100%").attr("height","100%").attr("viewBox","0 0 "+o+" "+a).selectAll("path").data(n.features).enter().append("path").attr("d",i).attr("fill",function(t){return"R"===t.properties.winner?"#e99d98":"D"===t.properties.winner?"#9cc0e3":void 0})},this.buildMap=function(t,e,n){d3.queue().defer(d3.json,t).defer(d3.json,e).await(n)}}}},function(t,e,n){var a=n(0),o=t.exports={getElections:function(t){let e=$("#elections");e.empty(),$.get("/api/get-elections",function(n){n.forEach(function(t){e.append($("<option>").text(t))}),t&&t()})},getStates:function(t){let e=$("#states");e.empty(),$.get("/api/get-states",function(t){let n=0;t.forEach(function(t){n++,e.append($("<option>",{text:t,value:n}))}),o.getStateResults(),o.getCounties()})},getCounties:function(){$("#states");let t=$("#counties"),e=$("#states option:selected").text();t.empty(),$.get("/api/get-counties?state="+encodeURI(e),function(e){e.forEach(function(e){t.append($("<option>").text(e))})})},getStateResults:function(t){t=t||$("#elections option:selected").text();let e=new a.electoralMap(t);e.buildMap("/api/get-state-results?election="+t,e.stateGeoJson,e.stateMap),$("#state-results").load("/snippets/state-results-table.html",function(){$("#vote-by-state-header").text(t+" State Results"),$("#state-results-table > tbody").empty(),$.get("/api/get-state-results",{election:t},function(e){let n=0;e.forEach(function(e){n++;let a=$("<tr>",{id:e.state.toLowerCase()+"-results",class:"county","data-state":e.state,"data-election":t,"data-value":n,css:{cursor:"pointer"}});a.append($("<td>",{text:e.state})),a.append($("<td>",{text:parseInt(e.democrat).toLocaleString(),css:{backgroundColor:e.democrat>e.republican?"#9cc0e3":""}})),a.append($("<td>",{text:parseInt(e.republican).toLocaleString(),css:{backgroundColor:e.democrat<e.republican?"#e99d98":""}})),a.append($("<td>",{text:parseInt(e.other).toLocaleString()})),a.click(function(){let t=$(this).get(0);$("#states").val(t.dataset.value),getCounties()}),$("#state-results-table > tbody").append(a)})})})},getCountyResultsByState:function(t,e){t=t||$("#elections option:selected").text(),e=e||$("#states option:selected").text(),$("#county-results").load("/snippets/results-table.html"),$("#results-table > tbody").empty(),$.post("/api/get-state-results-by-county",{state:e,election:t},function(t){t.forEach(function(t){let e=$("<tr>").append($("<td>",{text:t.county})).append($("<td>").css("background-color",t.democrat>t.republican?"#9cc0e3":"").text(parseInt(t.democrat).toLocaleString())).append($("<td>").css("background-color",t.democrat<t.republican?"#e99d98":"").text(parseInt(t.republican).toLocaleString())).append($("<td>").text(parseInt(t.other).toLocaleString()));$("#results-table > tbody").append(e)})})}}},function(t,e,n){var a=n(1);window.addEventListener("load",function(){$("#params").load("/snippets/params.html",function(){$("#elections").change(function(){a.getStateResults()}),$("#states").change(function(){a.getCounties()}),a.getElections(),a.getStates()})})}]);